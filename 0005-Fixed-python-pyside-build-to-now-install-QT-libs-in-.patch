From b0291df4184e6fee627eb340050da27ce250ae42 Mon Sep 17 00:00:00 2001
From: svolpe <shanevolpe@gmail.com>
Date: Thu, 11 Oct 2012 09:39:13 -0400
Subject: [PATCH 5/8] Fixed python-pyside build to now install QT libs in
 correct directory

---
 recipes-pyside/pyside/python-pyside_git.bb | 20 ++++++++++++++++----
 1 file changed, 16 insertions(+), 4 deletions(-)

diff --git a/recipes-pyside/pyside/python-pyside_git.bb b/recipes-pyside/pyside/python-pyside_git.bb
index 92c6d37..5aa704d 100644
--- a/recipes-pyside/pyside/python-pyside_git.bb
+++ b/recipes-pyside/pyside/python-pyside_git.bb
@@ -49,16 +49,28 @@ EXTRA_OECMAKE += " \
 						 -DSHIBOKEN_INCLUDE_DIR:PATH=${STAGING_INCDIR}/shiboken \
 						 -DCMAKE_LIBRARY_PATH=${STAGING_LIBDIR} \
 "
+do_configure_append() {
+	#find . -name cmake_install.cmake | xargs sed -i 's:/home/builder/oebuild/oe-core/build/tmp-eglibc/sysroots/beagleboard/usr/lib/python2.7/site-packages/PySide:/usr/lib/python2.7/site-packages/PySide:g'
+	find ${S}/PySide -name cmake_install.cmake | xargs sed -i "s:${STAGING_LIBDIR}/python2.7/site-packages/PySide:${libdir}/${PYTHON_DIR}/site-packages/PySide:g"
+}
+
+#do_install_append() {
+#	install -d ${D}${libdir}/${PYTHON_DIR}/site-packages/PySide/.debug
+#   mv $(find ${PKGD}/home \( -name Qt*.so -o -name phonon.so \)  |grep debug | xargs) ${D}${libdir}/${PYTHON_DIR}/site-packages/PySide/.debug
+#   mv $(find ${PKGD}/home \( -name Qt*.so -o -name phonon.so \)  |grep -v debug | xargs) ${D}${libdir}/${PYTHON_DIR}/site-packages/PySide/
+#	rm -rf  ${PKGD}/home 
+#}
 
 FILES_${PN} =+ " \
    ${libdir}/${PYTHON_DIR}/site-packages/PySide/*.so \
    ${libdir}/${PYTHON_DIR}/site-packages/PySide/*.py \
 "
 FILES_${PN}-dbg =+ "${libdir}/${PYTHON_DIR}/site-packages/PySide/.debug"
-#FILES_${PN}-dev =+ " \
-#   ${datadir}/PySide/typesystems \
-#   ${libdir}/cmake \
-#"
+
+FILES_${PN}-dev =+ " \
+   ${datadir}/PySide/typesystems \
+   ${libdir}/cmake \
+"
 
 LICENSE = "GPLv2"
 LIC_FILES_CHKSUM = "file://COPYING;md5=15a1ca44f90f3ab457d6a4fe7c0f3a19"
-- 
1.8.5.2 (Apple Git-48)

